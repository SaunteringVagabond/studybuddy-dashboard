import React, { useState, useEffect } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import CalendarEmbed from './components/CalendarEmbed';

const WebPortal = () => {
  const [tasks, setTasks] = useState([]);
  const [reminders, setReminders] = useState([]);
  const [events, setEvents] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [easterEgg, setEasterEgg] = useState(null);

  const messages = [
    "You're doing amazing!",
    "Keep shining bright, Evalyn!",
    "Why was the math book sad? Because it had too many problems!",
    "What did the Irish dancer say when she lost her shoe? 'Heel come back!'"
  ];

  const showEasterEgg = () => {
    const randomMessage = messages[Math.floor(Math.random() * messages.length)];
    setEasterEgg(randomMessage);
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-green-50 to-blue-50 p-6 font-sans">
      <h1 className="text-3xl font-bold mb-4 text-center">Evalyn's Portal</h1>

      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <div className="bg-white shadow-lg rounded-2xl p-4">
          <h2 className="text-xl font-semibold mb-2">Tasks</h2>
          <AnimatePresence>
            {tasks.map((task, index) => (
              <motion.div
                key={index}
                className="flex justify-between items-center p-2 border-b"
                initial={{ opacity: 1 }}
                exit={{ opacity: 0, x: 50 }}
              >
                <span>{task.title}</span>
                <input
                  type="checkbox"
                  aria-label={`Complete task: ${task.title}`}
                />
              </motion.div>
            ))}
          </AnimatePresence>
        </div>

        <div className="bg-white shadow-lg rounded-2xl p-4">
          <h2 className="text-xl font-semibold mb-2">Reminders</h2>
          {reminders.map((reminder, index) => (
            <div key={index} className="p-2 border-b">
              <span>{reminder.note}</span>
            </div>
          ))}
        </div>

        <div className="bg-white shadow-lg rounded-2xl p-4">
          <h2 className="text-xl font-semibold mb-2">Upcoming Events</h2>
          <div className="flex overflow-x-scroll gap-4">
            {events.map((event, index) => (
              <div key={index} className="min-w-[200px] bg-green-100 rounded-lg p-3">
                <h3 className="font-semibold">{event.name}</h3>
                <p className="text-sm">{event.date}</p>
                <ul className="mt-2">
                  {event.items?.split(',').map((item, i) => (
                    <li key={i}>• {item.trim()}</li>
                  ))}
                </ul>
              </div>
            ))}
          </div>
        </div>
      </div>

     <iframe src="https://calendar.google.com/calendar/embed?height=600&wkst=1&ctz=Europe%2FBerlin&showPrint=0&showTz=0&src=cXVlZW5vZnBhbmRhczgxQGdtYWlsLmNvbQ&src=ZW4udXNhI2hvbGlkYXlAZ3JvdXAudi5jYWxlbmRhci5nb29nbGUuY29t&color=%23039BE5&color=%230B8043" style="border:solid 1px #777" width="800" height="600" frameborder="0" scrolling="no">
       
     </iframe>

      {easterEgg && (
        <div className="fixed inset-0 bg-black bg-opacity-40 flex justify-center items-center z-50">
          <div className="bg-white rounded-xl p-6 shadow-xl">
            <p>{easterEgg}</p>
            <button
              onClick={() => setEasterEgg(null)}
              className="mt-4 bg-green-500 text-white py-2 px-4 rounded"
            >
              Close
            </button>
          </div>
        </div>
      )}

      <div
        className="fixed bottom-4 right-4 cursor-pointer opacity-30 hover:opacity-100 transition-opacity"
        onClick={showEasterEgg}
      >
        ☘️
      </div>
    </div>
  );
};

export default WebPortal;
